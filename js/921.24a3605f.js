"use strict";(self["webpackChunkmy_project"]=self["webpackChunkmy_project"]||[]).push([[921],{3921:function(e,a,t){t.r(a),t.d(a,{default:function(){return we}});var i=t(3396);function n(e,a,t,n,o,l){const r=(0,i.up)("CanvasModule"),s=(0,i.up)("Fabric");return(0,i.wg)(),(0,i.iD)("div",null,[0===o.step?((0,i.wg)(),(0,i.j4)(r,{key:0,onSetStep:l.setStep},null,8,["onSetStep"])):(0,i.kq)("",!0),1===o.step?((0,i.wg)(),(0,i.j4)(s,{key:1,onSetStep:l.setStep},null,8,["onSetStep"])):(0,i.kq)("",!0)])}var o=t(9242),l=t(7139);const r=e=>((0,i.dD)("data-v-567fad9f"),e=e(),(0,i.Cn)(),e),s={class:"flex"},d={class:"source"},c=r((()=>(0,i._)("p",null,"Canvas:",-1))),p={class:"button-container"},g={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-lock",viewBox:"0 0 16 16"},u={key:0,d:"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2zM3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1H3z"},v={key:1,d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2zM5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1z"},w={key:0},h={key:1},m=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-counterclockwise",viewBox:"0 0 16 16"},[(0,i._)("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"}),(0,i._)("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"})],-1))),b=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-clockwise",viewBox:"0 0 16 16"},[(0,i._)("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}),(0,i._)("path",{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"})],-1))),k=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-arrow-repeat",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"}),(0,i._)("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"})],-1))),f=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-file-earmark",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h-2z"})],-1))),y={class:"button-container"},_={key:0},C=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-eraser",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547 3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"})],-1))),S={key:1},x=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"})],-1))),V=["value"],D=(0,i.uE)('<option value="dash" data-v-567fad9f>Dash</option><option value="line" data-v-567fad9f>Straight Line</option><option value="circle" data-v-567fad9f>Circle</option><option value="square" data-v-567fad9f>Square</option><option value="triangle" data-v-567fad9f>Triangle</option><option value="half_triangle" data-v-567fad9f>Half Triangle</option>',6),M=[D],z=r((()=>(0,i._)("option",{value:"round"},"lineCap Round",-1))),I=r((()=>(0,i._)("option",{value:"square"},"lineCap Square",-1))),U=r((()=>(0,i._)("option",{value:"butt"},"lineCap butt",-1))),L=[z,I,U],R=r((()=>(0,i._)("option",{value:"round"},"lineJoin Round",-1))),A=r((()=>(0,i._)("option",{value:"miter"},"lineJoin miter",-1))),F=r((()=>(0,i._)("option",{value:"bevel"},"lineJoin bevel",-1))),H=[R,A,F],B={key:0},q=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-square-fill",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2z"})],-1))),j={key:1},P=r((()=>(0,i._)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-square",viewBox:"0 0 16 16"},[(0,i._)("path",{d:"M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"})],-1))),$={class:"button-container"},J={class:"button-container"},E={style:{"margin-right":"30px"}},W=r((()=>(0,i._)("p",{style:{"margin-bottom":"0"}},"Background Color:",-1))),O=r((()=>(0,i._)("p",{style:{"margin-bottom":"0"}},"Upload Background Image:",-1))),T=r((()=>(0,i._)("p",{style:{"margin-bottom":"0"}},"Upload Watermark Image:",-1))),Z={class:"output"},Y=r((()=>(0,i._)("p",null,"Output:",-1))),N=["src"];function X(e,a,t,n,r,D){const z=(0,i.up)("vue-drawing-canvas");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",d,[c,(0,i.Wm)(z,{ref:"VueCanvasDrawing",image:r.image,"onUpdate:image":a[0]||(a[0]=e=>r.image=e),width:600,height:400,"stroke-type":r.strokeType,"line-cap":r.lineCap,"line-join":r.lineJoin,"fill-shape":r.fillShape,eraser:r.eraser,lineWidth:r.line,color:r.color,"background-color":r.backgroundColor,"background-image":r.backgroundImage,watermark:r.watermark,"initial-image":r.initialImage,saveAs:"png",styles:{border:"solid 1px #000"},lock:r.disabled,"additional-images":r.additionalImages},null,8,["image","stroke-type","line-cap","line-join","fill-shape","eraser","lineWidth","color","background-color","background-image","watermark","initial-image","lock","additional-images"]),(0,i._)("div",p,[(0,i._)("button",{type:"button",onClick:a[1]||(a[1]=(0,o.iM)((e=>r.disabled=!r.disabled),["prevent"]))},[((0,i.wg)(),(0,i.iD)("svg",g,[r.disabled?((0,i.wg)(),(0,i.iD)("path",v)):((0,i.wg)(),(0,i.iD)("path",u))])),r.disabled?((0,i.wg)(),(0,i.iD)("span",h,"Lock")):((0,i.wg)(),(0,i.iD)("span",w,"Unlock"))]),(0,i._)("button",{type:"button",onClick:a[2]||(a[2]=(0,o.iM)((a=>e.$refs.VueCanvasDrawing.undo()),["prevent"]))},[m,(0,i.Uk)(" Undo ")]),(0,i._)("button",{type:"button",onClick:a[3]||(a[3]=(0,o.iM)((a=>e.$refs.VueCanvasDrawing.redo()),["prevent"]))},[b,(0,i.Uk)(" Redo ")]),(0,i._)("button",{type:"button",onClick:a[4]||(a[4]=(0,o.iM)((a=>e.$refs.VueCanvasDrawing.redraw()),["prevent"]))},[k,(0,i.Uk)(" Refresh ")]),(0,i._)("button",{type:"button",onClick:a[5]||(a[5]=(0,o.iM)((a=>e.$refs.VueCanvasDrawing.reset()),["prevent"]))},[f,(0,i.Uk)(" Reset ")])]),(0,i._)("div",y,[(0,i._)("button",{type:"button",onClick:a[6]||(a[6]=(0,o.iM)((e=>r.eraser=!r.eraser),["prevent"]))},[r.eraser?((0,i.wg)(),(0,i.iD)("span",_,[C,(0,i.Uk)(" Eraser ")])):((0,i.wg)(),(0,i.iD)("span",S,[x,(0,i.Uk)(" Draw ")]))]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[7]||(a[7]=e=>r.line=e)},[((0,i.wg)(),(0,i.iD)(i.HY,null,(0,i.Ko)(25,(e=>(0,i._)("option",{key:"option-"+e,value:e},(0,l.zw)(e),9,V))),64))],512),[[o.bM,r.line]]),(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":a[8]||(a[8]=e=>r.color=e)},null,512),[[o.nr,r.color]]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[9]||(a[9]=e=>r.strokeType=e)},M,512),[[o.bM,r.strokeType]]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[10]||(a[10]=e=>r.lineCap=e)},L,512),[[o.bM,r.lineCap]]),(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":a[11]||(a[11]=e=>r.lineJoin=e)},H,512),[[o.bM,r.lineJoin]]),(0,i._)("button",{type:"button",onClick:a[12]||(a[12]=(0,o.iM)((e=>r.fillShape=!r.fillShape),["prevent"]))},[r.fillShape?((0,i.wg)(),(0,i.iD)("span",B,[q,(0,i.Uk)(" Fill ")])):((0,i.wg)(),(0,i.iD)("span",j,[P,(0,i.Uk)(" Stroke ")]))])]),(0,i._)("div",$,[(0,i._)("button",{type:"button",onClick:a[13]||(a[13]=(0,o.iM)((e=>D.getStrokes()),["prevent"])),class:"py-2 px-3 bg-gray-600 text-white"}," Save All Strokes "),(0,i._)("button",{type:"button",onClick:a[14]||(a[14]=(0,o.iM)((e=>D.removeSavedStrokes()),["prevent"])),class:"py-2 px-3 bg-gray-300 text-white"}," Remove Saved Strokes ")]),(0,i._)("div",J,[(0,i._)("div",E,[W,(0,i.wy)((0,i._)("input",{type:"color","onUpdate:modelValue":a[15]||(a[15]=e=>r.backgroundColor=e)},null,512),[[o.nr,r.backgroundColor]])]),(0,i._)("div",null,[O,(0,i._)("input",{type:"file",onChange:a[16]||(a[16]=e=>D.setImage(e))},null,32)]),(0,i._)("div",null,[T,(0,i._)("input",{type:"file",onChange:a[17]||(a[17]=e=>D.setWatermarkImage(e))},null,32)])])]),(0,i._)("div",Z,[Y,(0,i._)("img",{src:r.image,style:{border:"solid 1px #000000"}},null,8,N)])])}var G=t(1576),K={name:"CanvasModule",components:{VueDrawingCanvas:G.Z},props:{},data(){return{initialImage:[{type:"dash",from:{x:262,y:154},coordinates:[],color:"#000000",width:5,fill:!1}],x:0,y:0,image:"",eraser:!1,disabled:!1,fillShape:!1,line:5,color:"#000000",strokeType:"dash",lineCap:"square",lineJoin:"miter",backgroundColor:"#FFFFFF",backgroundImage:null,watermark:null,additionalImages:[]}},mounted(){"vue-drawing-canvas"in window.localStorage&&(this.initialImage=JSON.parse(window.localStorage.getItem("vue-drawing-canvas")))},methods:{async setImage(e){let a=window.URL;this.backgroundImage=a.createObjectURL(e.target.files[0]),await this.$refs.VueCanvasDrawing.redraw()},async setWatermarkImage(e){let a=window.URL;this.watermark={type:"Image",source:a.createObjectURL(e.target.files[0]),x:0,y:0,imageStyle:{width:600,height:400}},await this.$refs.VueCanvasDrawing.redraw()},getCoordinate(e){let a=this.$refs.VueCanvasDrawing.getCoordinates(e);this.x=a.x,this.y=a.y},getStrokes(){window.localStorage.setItem("vue-drawing-canvas",JSON.stringify(this.$refs.VueCanvasDrawing.getAllStrokes())),window.localStorage.setItem("vue-canvas",this.image),alert("Strokes saved, reload your browser to see the canvas with previously saved image"),this.$emit("setStep",1)},removeSavedStrokes(){window.localStorage.removeItem("vue-drawing-canvas"),alert("Strokes cleared from local storage")}}},Q=t(89);const ee=(0,Q.Z)(K,[["render",X],["__scopeId","data-v-567fad9f"]]);var ae=ee;const te={class:"Fabric"},ie=(0,i._)("div",null,[(0,i._)("input",{type:"file",accept:"application/pdf",placeholder:"選擇PDF檔案"})],-1),ne=(0,i._)("canvas",{id:"canvas",style:{border:"1px solid #000"}},null,-1),oe=(0,i._)("p",null,"選擇簽名",-1),le=(0,i._)("img",{class:"sign",style:{border:"1px solid #000"},width:"250",height:"150"},null,-1),re=(0,i._)("button",{class:"py-2 px-3 bg-gray-600 text-white downloadBtn"},"download PDF",-1);function se(e,a,t,n,o,l){return(0,i.wg)(),(0,i.iD)("div",te,[ie,ne,oe,le,re,(0,i._)("a",{onClick:a[0]||(a[0]=a=>e.$emit("setStep",0))},"上一頁")])}t(2801);var de=t(4870),ce={name:"FabricPage",setup(){const e=(0,de.iH)(!1);return(0,i.bv)((()=>{const e="data:application/pdf;base64,";document.querySelector(".add");pdfjsLib.GlobalWorkerOptions.workerSrc="https://mozilla.github.io/pdf.js/build/pdf.worker.js";const a=e=>(console.log("readBlob"),new Promise(((a,t)=>{const i=new FileReader;i.addEventListener("load",(()=>a(i.result))),i.addEventListener("error",t),i.readAsDataURL(e)}))),t=async t=>{console.log("printPDF"),t=await a(t);const i=atob(t.substring(e.length)),n=await pdfjsLib.getDocument({data:i}).promise,o=await n.getPage(1),l=o.getViewport({scale:window.devicePixelRatio}),r=document.createElement("canvas"),s=r.getContext("2d");r.height=l.height,r.width=l.width;const d={canvasContext:s,viewport:l},c=o.render(d);return c.promise.then((()=>r))},i=async e=>{const a=1/window.devicePixelRatio;return new fabric.Image(e,{scaleX:a,scaleY:a})},n=new fabric.Canvas("canvas");document.querySelector("input").addEventListener("change",(async e=>{n.requestRenderAll();const a=await t(e.target.files[0]),o=await i(a);n.setWidth(o.width/window.devicePixelRatio),n.setHeight(o.height/window.devicePixelRatio),n.setBackgroundImage(o,n.renderAll.bind(n))}));const o=document.querySelector(".sign");localStorage.getItem("vue-canvas")&&(o.src=localStorage.getItem("vue-canvas")),o.addEventListener("click",(()=>{o.src&&fabric.Image.fromURL(o.src,(function(e){e.top=400,e.scaleX=.5,e.scaleY=.5,n.add(e)}))}));const l=new jsPDF,r=document.querySelector(".downloadBtn");r.addEventListener("click",(()=>{const e=n.toDataURL("image/png"),a=l.internal.pageSize.width,t=l.internal.pageSize.height;l.addImage(e,"png",0,0,a,t),l.save("download.pdf")}))})),{isPDfFile:e}}};const pe=(0,Q.Z)(ce,[["render",se]]);var ge=pe,ue={name:"ServeDev",components:{CanvasModule:ae,Fabric:ge},data(){return{step:0}},methods:{setStep(e){this.step=e}}};const ve=(0,Q.Z)(ue,[["render",n]]);var we=ve}}]);
//# sourceMappingURL=921.24a3605f.js.map